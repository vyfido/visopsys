<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Visopsys Downloads - Change Log</title>
<meta name="Microsoft Border" content="lb">
</head>

<body bgcolor="#285DAB" text="#FFFFFF" link="#FFFF00" vlink="#00FF00"
background="../img/background.jpg" bgproperties="fixed"><!--msnavigation--><table dir="ltr" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td valign="top" width="1%">
<div align="center"><center>

<table border="0" cellpadding="0" cellspacing="0" width="93">
  <tr>
    <td width="99"><p align="center"><font color="#FFFFFF"><a href="../index.html">
    <img src="../img/nav_buttons/home.gif" alt="Go back to the Visopsys Home Page." border="0" align="middle" width="53" height="25"></a><br>
    <br>
    <a href="../about/index.html">
    <img src="../img/nav_buttons/about.gif" alt="What is Visopsys?" border="0" align="middle" width="60" height="25"></a></font><p align="center">
    <a href="../about/screenshots.html">
    <img border="0" src="../img/nav_buttons/screenshots.gif" width="105" height="22"></a><font color="#FFFFFF"><br>
    <br>
    <a href="index.html">
    <img src="../img/nav_buttons/download.gif" alt="Download Visopsys and associated files." border="0" align="middle" width="95" height="25"></a></font><br>
    <br>
    <a href="../developers/index.html">
    <img src="../img/nav_buttons/developers.gif" border="0" alt="Resources for Visopsys development" align="middle" width="97" height="29"></a><br>
    <br>
    <a href="../osdev/index.html">
    <img src="../img/nav_buttons/osdev.gif" border="0" alt="OS Development Resources" align="middle" width="64" height="25"></a><br>
    <br>
    <a href="../search.html">
    <img src="../img/nav_buttons/search.gif" alt="Search the Visopsys Site" align="middle" border="0" width="63" height="24"></a></td>
  </tr>
</table>
</center></div>

</td><td valign="top" width="24"></td><!--msnavigation--><td valign="top">

<p align="center">&nbsp;</p>

<p align="center">
<img src="../img/banners/visopsys-logo.gif" align="middle" border="0" width="291" height="94"><br>
<img src="../img/banners/visopsys-download.gif" align="middle" border="0" width="291" height="46"></p>

<font SIZE="2">

<p><font size="4">VERSION 0.55<br>
</font></font>18/05/2005</p>
<p><font size="4">Overview: This is a maintenance and bugfix release, with some 
additional capabilities including installation support for all FAT filesystems, 
primitive PCI driver support, and a better organised device driver 
infrastructure. In addition, GUI window layout and resizing has been 
reimplemented and generally fixed.</font></p>
<ul>
  <li><font size="4">The system can now install to and boot from any kind of FAT 
  filesystem (FAT12, FAT16, and FAT32/VFAT).</font></li>
  <li><font size="4">Fixed window relayout when windows are sized.</font></li>
  <li><font size="4">Implemented a better-organised hardware device &quot;tree&quot; and a 
  new, more generic device driver interface.</font></li>
  <li><font size="4">Added a basic PCI bus driver, the initial implementation of 
  which was provided by Jonas Zaddach. Only logs a bus device scan, for the 
  moment.</font></li>
  <li><font size="4">Implemented a basic a signalling infrastructure, which 
  initially fixes the problem of CTRL-C crashing the system in text mode.</font></li>
  <li><font size="4">Back-ported a number of changes and improvements from the 
  0.6 branch to the kernel's disk layer.</font></li>
  <li><font size="4">Added a 'debug window layout' function that displays the 
  layout grid alongside the components; makes it much easier to do program 
  window design and to debug the kernel's layout code.</font></li>
  <li><font size="4">The window manager's event handler thread now dynamically 
  allocates the memory it uses for storing event hooks.</font></li>
  <li><font size="4">Implemented the 'swab' libc function. Useful for 
  networking.</font></li>
  <li><font size="4">The page manager's 'get physical address' function has been 
  modified so that it works with addresses that aren't page-aligned.</font></li>
  <li><font size="4">The interrupt controller functions now have a function that 
  returns the active interrupt number, and synchronized the kernel's hardware 
  interrupt number codes with the 'normal' PC interrupt numbers (e.g. 0-F).</font></li>
  <li><font size="4">Fixed: Interrupts are now disabled during the pause before 
  reboot, so that for example the kernel is not still processing I/O interrupts 
  and such.</font></li>
  <li><font size="4">Fixed: A number of small issues with the kernelWindowStream 
  code.</font></li>
  <li><font size="4">Fixed: In the install program, installing on a 
  freshly-inserted floppy. could produce the error message &quot;can't install a boot 
  sector for filesystem type 'unknown'&quot;.</font></li>
  <li><font size="4">Fixed: When installing from a 'basic' install, there was a 
  spurious error message resulting from attempting to look for the 'full' 
  install file.</font></li>
</ul>
<hr>

<p><font size="4">VERSION 0.54<br>
</font>22/03/2005</p>
<p><font size="4">Overview: This is a maintenance release, with numerous small 
improvements and bug fixes including some general back-porting from the 0.6 
development branch.&nbsp; In addition, IDE disk-to-disk operations have been 
improved so that they can happen in parallel, the kernel hardware drivers' 
interrupt handing has been given a new interface, and there is some improved 
efficiency in a performance-critical section of the multitasker.</font></p>
<ul>
  <li><font size="4">Updated the IDE disk controller locking, so that each now 
  have their own locks; thus I/O can be done in parallel between disks on 
  different controllers.</font></li>
  <li><font size="4">Back-ported large numbers small changes and improvements 
  from the 0.6 development branch.</font></li>
  <li><font size="4">Cleaned up the kernelInterrupt code, got rid of all the 
  'default' handlers, added an interface for getting/hooking the vectors, and 
  changed all the built-in drivers to use the interface. All interrupts are now 
  initially masked off, and the hardware driver code for each kind of device has 
  to turn them on after hooking the handler.</font></li>
  <li><font size="4">The bootable floppy image for the ISO distribution now 
  contains only the OS loader and the kernel, because only these are used. This 
  shrinks the (zipped) ISO image size.</font></li>
  <li><font size="4">The calculation of CPU percentage in the multitasker's 
  scheduler is now done more efficiently, inside the loop that evaluates the 
  process queue.</font></li>
  <li><font size="4">Added text 'save screen' and 'restore screen' functions for 
  use by programs such as 'fdisk' and 'install' which clear the screen.</font></li>
  <li><font size="4">Added convenience functions to the kernelUser code for 
  working with arbitrary password files, so that for example the installer can 
  set up the destination password file without doing it all manually.</font></li>
  <li><font size="4">Added kernelDiskGet() (single logical or physical), 
  kernelDiskGetAll(), and kernelDiskGetAllPhysical() functions.</font></li>
  <li><font size="4">The kernel's page manager now includes a method for setting 
  flags on pages (such as writable, present, cache disable, etc), and a function 
  that allows memory to be mapped at a particular address.</font></li>
  <li><font size="4">Created a user-space 'process image' structure that can 
  describe details such as memory page mapping, virtual addresses, entry points, 
  arguments, and so on.</font></li>
  <li><font size="4">kernelError.h now contains the include for &lt;sys/errors.h&gt;</font></li>
  <li><font size="4">Fixed: Copying a big file such as an .iso image could fail 
  because the copy code tried to allocate enough memory for the whole file. Now 
  it allocates as much as possible and does multiple reads/writes</font></li>
  <li><font size="4">Fixed: Typing and using the mouse at the same time was 
  causing funny things to go on. The interrupt handlers for the two devices 
  needed to be better synchronized.</font></li>
  <li><font size="4">Fixed: When dragging an icon, one pixel-width of the icon 
  title wasn't being erased properly.</font></li>
  <li><font size="4">Fixed: The FAT12 boot sector source code shipped with 
  version 0.53 didn't work for floppy disks</font></li>
  <li><font size="4">Fixed: In the libc's _xpndfmt.c function (used by printf, 
  sprintf, etc), the numDigits() function was returning the wrong value for 
  large signed numbers, resulting in double-width numbers for format strings 
  such as %08x.</font></li>
  <li><font size="4">Fixed: The graphics mode text driver was not recognizing 
  'longest lines' if the cursor had been moved around using the textSetRow 
  function.</font></li>
  <li><font size="4">Fixed: Doing a second kernel make without changing anything 
  resulted in an empty kernelSymbols.txt file, since the previous make stripped 
  the kernel.</font></li>
</ul>
<font SIZE="2"><hr></font>

<p><font size="4">VERSION 0.53<br>
</font>01/02/2005</p>
<p><font size="4">Overview: This is a maintenance release, with numerous small 
improvements and bug fixes.&nbsp; A number of unnecessary files and programs 
have been removed.</font></p>
<ul>
  <li><font size="4">Re-engineered the kernel's file handling code so that it 
  uses less stack memory, has less code redundancy, and exports different 
  functions to the rest of the kernel than it does to user space.</font></li>
  <li><font size="4">The format operation causes the kernel to re-scan the 
  partitions, so that the new filesystem type is recorded in the disk structure</font></li>
  <li><font size="4">The Program Manager now shows overall memory usage totals.</font></li>
  <li><font size="4">The 'mem' command now prints totals in kilobytes, and uses 
  a structure from the kernel (a new API function) describing the memory blocks, 
  rather than the kernel printing out the information directly. Subsequently, 
  deprecated the kernelMemoryPrintUsage() function.</font></li>
  <li><font size="4">The shutdown program now attempts to eject the CD-ROM a 
  second time if required, since it seems that some drives will fail on the 
  first attempt but succeed on the second.</font></li>
  <li><font size="4">The FAT boot sectors no longer rely on the disk geometry 
  they get from the DOS BPB block. They get it from the BIOS instead.</font></li>
  <li><font size="4">Removed the 'move' command (there's already a 'mv' command)</font></li>
  <li><font size="4">Removed a large number of unimplemented libc function 
  files.</font></li>
  <li><font size="4">Moved the libc global data into crt0.c</font></li>
  <li><font size="4">The boot sectors/OS loader that capture key presses (&quot;press 
  any key...&quot;) now use the BIOS' int 16h function instead of trapping the 
  hardware interrupt.</font></li>
  <li><font size="4">Deprecated the kernelDisk{Read|Write}Absolute functions. 
  Instead, the normal kernelDisk{Read|Write} functions are now able to figure 
  out whether the supplied disk name is physical or logical.</font></li>
  <li><font size="4">The libvsh functions no longer call perror(). They still 
  set errno, and then leave perror() up to the caller.</font></li>
  <li><font size="4">Added the -W and -Wshadow options to Makefiles.</font></li>
  <li><font size="4">Added -ffreestanding to Makefiles, to ensure that the 
  compiler isn't including built-in functions we're not expecting.</font></li>
  <li><font size="4">Got rid of the &quot;unsigned int&quot; terminology everywhere and 
  replaced it with simple &quot;unsigned&quot;</font></li>
  <li><font size="4">Fixed: The Disk Manager was showing 1MB total size for all 
  disks</font></li>
  <li><font size="4">Fixed: In the Disk Manager's 'create partition' function, 
  if you supplied bad start/end values, the logical/primary choice would be 
  disabled when the dialog box came back.</font></li>
  <li><font size="4">Fixed: When copying a file, if the destination was a 
  directory (rather than a fully-specified file name), there was a 
  kernelFileDelete error message</font></li>
  <li><font size="4">Fixed: when the vshCursorMenu scrolled the screen, it 
  looked funny.</font></li>
  <li><font size="4">Fixed: 'ls' an unknown file, hang!</font></li>
</ul>
<font SIZE="2"><hr></font>

<p><font size="4">VERSION 0.52<br>
</font>14/01/2005</p>
<p><font size="4">Overview: This is a maintenance and bugfix release, with some 
additional features, such as improved disk-to-disk copies and partition table 
reordering in the Disk Manager, and additional C library functions.</font></p>
<ul>
  <li><font size="4">Implemented threaded, double-buffered disk IO for the 'copy 
  disk' functionality of the disk manager.</font></li>
  <li><font size="4">The disk manager's slice list now indicates the disk name 
  and file system type (if available), and it is now possible to change the 
  partition table ordering - i.e., changing drive names/letters.</font></li>
  <li><font size="4">The vsh history is bigger, and there is now a 'history' 
  command.</font></li>
  <li><font size="4">Added open(), lseek(), read(), write(), close(), fprintf, 
  fread(), fwrite(), and stat() C library functions.</font></li>
  <li><font size="4">The kernelError messages now indicate the name of the 
  process that caused the error.</font></li>
  <li><font size="4">The 'disks' command now reports the filesystem type, if 
  known, and not just the partition label.</font></li>
  <li><font size="4">Exported the kernelMultitaskerProcessIsAlive() function.</font></li>
  <li><font size="4">The 'vsh' and 'ls' commands have been updated to improve 
  their stack/data memory usages.</font></li>
  <li><font size="4">The kernelConfigurationWriter has been reworked so that if 
  the file already exists, it writes the new one to a temp location first, then 
  moves the new one over top.</font></li>
  <li><font size="4">Fixed up the Makefiles a bit and we now make sure that 
  we're building with the correct CPU specified.</font></li>
  <li><font size="4">Fixed up 'errno' implementation in the C library.</font></li>
  <li><font size="4">Fixed: The disk manager 'copy disk' failure was leaving the 
  dialog box on the screen.</font></li>
  <li><font size="4">Fixed: The format command could hang when doing a large 
  FAT32 filesystem.</font></li>
  <li><font size="4">Fixed: The 'rmdir' functionality was broken, because the 
  '.' and '..' entries were not being removed correctly.</font></li>
  <li><font size="4">Fixed: In the disk manager's 'create partition' function, 
  specifying a megabyte size value overflowed at 4096m.</font></li>
  <li><font size="4">Fixed: The windowList component has been changed to stop 
  implementing its own idea of 'container', and use the standard container 
  component.</font></li>
  <li><font size="4">Fixed: Deleting the old menu list items in 
  kernelWindowShellUpdateList() was causing crashes; it was disabled in the 0.5 
  release, and it was a pretty serious memory leak.</font></li>
  <li><font size="4">Fixed: The 'umount' command failed when a following / was 
  after the mount point name.</font></li>
</ul>
<font SIZE="2"><hr></font>

<p><font size="4">VERSION 0.51<br>
</font>30/12/2004</p>
<p><font size="4">Overview: This is a maintenance and bugfix release, with some 
additional features, such as the Disk Manager's ability to fix small partition 
table consistency errors.</font></p>
<ul>
  <li><font size="4">Enhanced the bootstrap code so that it is possible to boot 
  on some trickier hardware platforms, such as Toshiba laptops.</font></li>
  <li><font size="4">The disk manager now offers to fix errors turned up by the 
  partition table check.</font></li>
  <li><font size="4">The disk thread now respawns when it is killed [ thanks 
  Thomas Kreitner ].</font></li>
  <li><font size="4">The 'install' program now show a progress meter in text 
  mode while copying files.</font></li>
  <li><font size="4">When the shutdown program is attempting to eject the disk, 
  it now shows a banner dialog since sometimes it takes a couple of seconds.</font></li>
  <li><font size="4">In the text area code, when the screen is cleared, the 
  existing screen contents are no longer rolled back into the buffer -- they are 
  discarded.</font></li>
  <li><font size="4">Deprecated the windowPack() and windowSetPacked() API 
  functions.</font></li>
  <li><font size="4">While attempting builds with gcc version 3.4.2, fixed a 
  number of bugs and details that the newer compiler found.</font></li>
  <li><font size="4">Fixed: The program manager wasn't really putting threads 
  under their correct process parents; it merely put them in order as received 
  from the kernel.</font></li>
  <li><font size="4">Fixed: The getopt() library function was being used 
  incorrectly by a number of the user applications.</font></li>
  <li><font size="4">Fixed: It was possible to kill the exception handler 
  thread, which caused an immediate triple fault [ thanks Thomas Kreitner ].</font></li>
  <li><font size="4">Fixed: Broken CD-ROM floppy disk emulations no longer trick 
  the loader into detecting nonexistent floppies.</font></li>
  <li><font size="4">Fixed: On some hardware, the kernel's hardware detection 
  could be tricked into detecting nonexistent fixed disks with NULL geometry.</font></li>
  <li><font size="4">Fixed: The 'megabytes' value being printed for hard disks 
  by the loader was severely wrong.</font></li>
</ul>
<hr>

<p><font size="4">VERSION 0.5<br>
</font>12/12/2004</p>
<p><font size="4">Overview: This release adds logical partition capabilities to 
both the kernel and the Disk Manager (which has been substantially rewritten), 
window minimizing, a GUI taskbar for managing windows, new icons and cleaner 
desktop layout, a 'Program Manager' application, and a temporary file interface 
-- as well as lots of bug fixes and smaller tweaks.</font></p>
<ul>
  <li><font size="4">Added support for hard disk logical partitions</font></li>
  <li><font size="4">Added a 'taskbar' menu to the top of the root window.</font></li>
  <li><font size="4">Added 'minimize' functionality to windows.</font></li>
  <li><font size="4">Made a 'program manager' program that allows a user to 
  manage running processes, etc.</font></li>
  <li><font size="4">Enlarged the disk manager window and its canvas, and added 
  a more action buttons. </font></li>
  <li><font size="4">Added a 'show info' action to the disk manager.</font></li>
  <li><font size="4">Implemented the ability to 'hide' partitions in the disk 
  manager</font></li>
  <li><font size="4">The disk manager now includes an option for writing a fresh 
  partition table to a disk.</font></li>
  <li><font size="4">The disk manager now allows the disk to be specified as a 
  command line argument.</font></li>
  <li><font size="4">The disk manager now has a better GUI interface for 
  creating a new partition.</font></li>
  <li><font size="4">Implemented a temporary file interface</font></li>
  <li><font size="4">The install program now shows which install disk is 
  selected when in graphics mode.</font></li>
  <li><font size="4">Made a new 'shell' icon for the command window, added icons 
  for the program manager and configuration editor, and removed the 'logout' and 
  'shutdown' icons from the desktop.</font></li>
  <li><font size="4">Programs that can run in both graphics and text modes (such 
  as the disk manager and the installer) now have a standard -T argument that 
  causes them to run in text mode.</font></li>
  <li><font size="4">Added a libvsh 'cursor menu'. Converted imgboot, fdisk, 
  etc. to use it.</font></li>
  <li><font size="4">Added the ability to have comment lines in the install 
  files</font></li>
  <li><font size="4">Created a libvsh function for parsing a command line into 
  command and args, suitable for passing to the loaderLoadAndExec function.</font></li>
  <li><font size="4">Added a user-space 'process' struct, and converted the 'ps' 
  command to use it.</font></li>
  <li><font size="4">The date/time printing library functions have been cleaned 
  up and fixed so that they don't print superfluous spaces</font></li>
  <li><font size="4">Restored the 'ownership' attributes of input streams, and 
  restored the CTRL-C functionality.</font></li>
  <li><font size="4">Moved the 'dist' directory out of the 'utils' area and into 
  the top level directory</font></li>
  <li><font size="4">Added strchr and strrchr C library functions</font></li>
  <li><font size="4">Added a kernelStreamDestroy() function to complement 
  kernelStreamNew()</font></li>
  <li><font size="4">Attempting to mount a CD will now close the tray before the 
  attempt, if it's open.</font></li>
  <li><font size="4">Removed the icons= line from windowmanager.conf. The window 
  shell will now figure out the list of icons dynamically based on which ones 
  are actually specified in the file</font></li>
  <li><font size="4">The 'format' now has 2 additional modes: a graphical mode, 
  and a non- interactive 'silent' mode.</font></li>
  <li><font size="4">(Re)-implemented the ability to get a screen shot from a 
  key press.&nbsp; The 'instant screenshot' is triggered by [PRINT SCRN] key, 
  and multiple shots can be taken this way without overwriting one another.</font></li>
  <li><font size="4">The vsh prompt is no longer the whole directory path; just 
  the current directory name.</font></li>
  <li><font size="4">The window checkbox widget now ignores the user-specified 
  foreground color for the 'x', since we always use white for the background 
  behind it, and if the foreground was white, no 'x' would be visible.</font></li>
  <li><font size="4">The graphical shutdown program now offers an 'eject CD-ROM' 
  checkbox when booted from CD-ROM, since otherwise the door stays locked and 
  getting the CD out during the BIOS POST can be tricky.</font></li>
  <li><font size="4">CTRL-ALT-DEL now does a proper shutdown, so that the disks 
  are synced before rebooting.</font></li>
  <li><font size="4">Removed the exception handler's 'core dump' code, since it 
  wasn't all that useful without tracing/debugging facilities.</font></li>
  <li><font size="4">Clicking outside of all of a window's components now 
  removes the focus from any focussed component.</font></li>
  <li><font size="4">Fixed: The 'cdrom' program's help page claimed that it will 
  attempt to guess the name of the device is not specified, but that hadn't been 
  implemented. It always picked the first cdrom.</font></li>
  <li><font size="4">Fixed: The ATAPI driver was not reliably ejecting CD-ROMs.</font></li>
  <li><font size="4">Fixed: The window manager screenshot code was crashy</font></li>
  <li><font size="4">Fixed: The 'display settings' program's 'show clock on the 
  desktop' thing was very crashy.</font></li>
  <li><font size="4">Fixed: The kernelFileStreamClose() function now destroys 
  the stream.&nbsp; Previously it didn't do so and was a memory leak.</font></li>
  <li><font size="4">Fixed: The installation program now calculates the required 
  space more accurately, and verifies adequate disk space *before* starting the 
  installation.</font></li>
  <li><font size="4">Fixed: Extra (second) floppy disks were showing up where 
  they didn't exist</font></li>
  <li><font size="4">Fixed: The disk manager's formatting functionality was 
  crashy </font></li>
  <li><font size="4">Fixed: In graphics mode, the disk manager's action buttons 
  were not being laid out properly.</font></li>
  <li><font size="4">Fixed: In graphics mode, the disk name argument of the disk 
  manager didn't properly select the disk in the disk list.</font></li>
  <li><font size="4">Fixed: The kernel logger was inserting random characters 
  into the log at 512-byte boundaries.</font></li>
  <li><font size="4">Fixed: The return value of the library memcmp function. If 
  comparison failed on the first byte, it was returning success (0).</font></li>
  <li><font size="4">Fixed: Partition Magic was complaining about the disk 
  manager's CHS values being incorrect.&nbsp; In particular it wasn't liking our 
  'maxed out' head and sector values when a partition started or ended at a 
  cylinder &gt; 1024.</font></li>
  <li><font size="4">Fixed: When creating new partitions in the disk manager, 
  Partition Magic was showing multiple ones as active.</font></li>
  <li><font size="4">Fixed: Dragging an icon was executing the program, as if 
  the icon were simply clicked</font></li>
  <li><font size="4">Fixed: Seeking/writing to the end of a file stream was 
  broken.</font></li>
  <li><font size="4">Fixed: Typing during a graphics mode screen scroll left 
  stray cursors on the screen and could cause crashes</font></li>
  <li><font size="4">Fixed: When snapping the icons in the root window, the 
  window layout was being redone too many times (once for *every* icon that 
  moved).</font></li>
  <li><font size="4">Fixed: The menu bar component was ignoring any 
  user-specified font.</font></li>
  <li><font size="4">Fixed: Window title bar menus are no longer drawn if there 
  are no items in them.</font></li>
  <li><font size="4">Fixed: The window canvas component was generating a 
  kernelMemoryRelease message about a pointer not being mapped.</font></li>
  <li><font size="4">Fixed: Causing the console text area to scroll while it 
  wasn't visible caused a triple-fault.</font></li>
  <li><font size="4">Fixed: The status messages in the graphical install program 
  were wrapping off the window.</font></li>
  <li><font size="4">Fixed: If a CD-ROM was a master with a slave, that CD-ROM 
  was not detected.&nbsp; If the slave was also a CD-ROM, neither was detected.</font></li>
  <li><font size="4">Fixed: The system was unable to boot from the second CD-ROM 
  device.</font></li>
  <li><font size="4">Fixed: Running the 'install' program with a disk name 
  argument was not working</font></li>
</ul>
<hr>

<p><font size="4">VERSION 0.42<br>
</font>11/09/2004</p>
<p><font size="4">Overview: This is primarily a bugfix release, with some added 
features including the ability to format partitions from the Disk Manager, plus 
vertical scroll bars on text areas and visual reimplementation of &quot;greyed out&quot; 
window components.</font></p>
<ul>
  <li><font size="4">Enabled filesystem formatting functionality in the disk 
  manager.</font></li>
  <li><font size="4">Implemented vertical scroll bars and extended buffers on 
  window text area components</font></li>
  <li><font size="4">Improved the 'greying out' functionality in the window 
  manager; it didn't look great with the default colors and looked positively 
  silly with some other color schemes.</font></li>
  <li><font size="4">Reimplemented the 'hidden' functionality of window text 
  areas so that the buffer contains the real content, and the visible area 
  contains the asterisks. The 'get data' function returns the data from the 
  buffer.</font></li>
  <li><font size="4">The window manager now makes more use of the busy mouse 
  pointer</font></li>
  <li><font size="4">Restored window list locking, now that interrupt handlers 
  don't need access.</font></li>
  <li><font size="4">Created a new logo for the splash image</font></li>
  <li><font size="4">In the disk manager, there is now a confirmation dialog 
  before moving partitions</font></li>
  <li><font size="4">Added a 'get disk by file' function.</font></li>
  <li><font size="4">The 'disk' structures now contain a set of flags to 
  indicate which filesystem functions are available from the appropriate driver, 
  if applicable.</font></li>
  <li><font size="4">Moved the window event processing out of the execution path 
  of interrupt handlers and into the window manager thread</font></li>
  <li><font size="4">Added 'new' and 'destroy' functions for kernelTextAreas</font></li>
  <li><font size="4">Moved icons and fonts into subdirectories under /system</font></li>
  <li><font size="4">Added a way to specify whether a loadable font should be 
  fixed-width</font></li>
  <li><font size="4">Removed instances of 'bzero' calls in the kernel. We have a 
  much better kernelMemClear() function.</font></li>
  <li><font size="4">Added a 'strncasecmp' C library function</font></li>
  <li><font size="4">Simplified the management of 'kernelFilesystem' structures 
  in the filesystem code.</font></li>
  <li><font size="4">The graphics code (main, framebuffer driver, and window 
  manager and friends) now uses ints instead of unsigneds for widths and heights</font></li>
  <li><font size="4">Moved the font argument from some window components into 
  the componentParameters structure</font></li>
  <li><font size="4">Fixed: Setting the widest item in a GUI menu to not enabled 
  caused a bit of the menu border to get greyed out as well.</font></li>
  <li><font size="4">Fixed: State changes in the disk manager's disk and 
  partition lists caused by key events were not being handled properly.</font></li>
  <li><font size="4">Fixed: In the User Manager, when adding a new user, if the 
  user already existed the program would still prompt for a password.</font></li>
  <li><font size="4">Fixed: In 16-bit video mode, window titles were not 
  displaying proper transparency</font></li>
  <li><font size="4">Fixed: The size/drawing of the items in list components was 
  slightly off.</font></li>
  <li><font size="4">Fixed: If fonts or icons are missing, there's a panic</font></li>
  <li><font size="4">Fixed: The text mode console driver was not scrolling 
  properly when printing long lines. The next line would overwrite the wrapped 
  part of the previous one.</font></li>
</ul>
<hr>

<p><font size="4">VERSION 0.41<br>
</font>09/08/2004</p>
<p><font size="4">Overview: This is primarily a bugfix release, with some added 
features, including the ability to move partitions, a configuration editor, and 
a keymap editor.&nbsp; There are also a number of small tweaks to graphical 
components and GUI user settings.</font></p>
<ul>
  <li><font size="4">The disk manager can now move partitions in contiguous 
  space (i.e. it can 'slide' them from side to side)</font></li>
  <li><font size="4">Created a 'configuration editor' for editing configuration 
  files</font></li>
  <li><font size="4">Created a 'keymap editor' for choosing keyboard layout.</font></li>
  <li><font size="4">In the Disk Manager, clicking on a colored slice in the 
  canvas area now selects the partition</font></li>
  <li><font size="4">Added a 'color chooser' window library dialog box</font></li>
  <li><font size="4">The window shell thread now loads programs automatically 
  based on things specified in the window manager config file.</font></li>
  <li><font size="4">Added a pretty xterm font (modified from the xterm program 
  under Linux).</font></li>
  <li><font size="4">Made it possible to set the default foreground, background, 
  and desktop colors for all graphics operations in the kernel.conf file.</font></li>
  <li><font size="4">Added a 'show clock on desktop' checkbox to the display 
  properties app with an accompanying clock app.</font></li>
  <li><font size="4">Implemented right and middle mouse click events.</font></li>
  <li><font size="4">The radio button GUI widget will now accept focus and allow 
  keyboard control</font></li>
  <li><font size="4">In the Disk Manager, when a new partition is created, it is 
  now selected afterward.</font></li>
  <li><font size="4">When copying disks in the disk manager, added a better 
  prompt dialog to ask which disk to copy to, with a clickable list instead of a 
  typing prompt, and it doesn't prompt about which disk to copy to if there's 
  only one other choice</font></li>
  <li><font size="4">Made the 'scroll bar' GUI widget available from user space</font></li>
  <li><font size="4">Calling 'set selected' with GUI list widgets now scrolls 
  the list if necessary so that the selected one is visible.</font></li>
  <li><font size="4">The window manager no longer re-saves its config file at 
  shutdown</font></li>
  <li><font size="4">Added a 'cancel' button to the 'copy disk' dialog of the 
  disk manager</font></li>
  <li><font size="4">Mouse dragging events now filter down to the user space via 
  the event stream.</font></li>
  <li><font size="4">Added a 'kill by name' function to the multitasker.</font></li>
  <li><font size="4">Added a 'focus' routine to the menu widget, so that when 
  the menu will disappear itself if it loses the focus</font></li>
  <li><font size="4">Made a more friendly error message for the help command 
  when there is not a help file for the topic.</font></li>
  <li><font size="4">Fixed: In 15-bit graphics modes, the colors were all wrong.</font></li>
  <li><font size="4">Fixed: The window list component was not responding very 
  accurately to movements of the vertical slider, the slider was picking up both 
  up-and-down mouse clicks, and dragging wasn't all that perfect either.</font></li>
  <li><font size="4">Fixed: It was possible to resize a window down to nothing 
  (or less than nothing!!).</font></li>
  <li><font size="4">Fixed: The mouse pointer was leaving tracers when dragging 
  or resizing windows, or dragging icons</font></li>
  <li><font size="4">Fixed: Compilation failed on SuSE 9, with gcc 3.3.3 and 
  (more importantly) whatever GNU ld comes with it.</font></li>
  <li><font size="4">Fixed: It wasn't possible to hide a GUI component if they 
  had the focus.</font></li>
  <li><font size="4">Fixed: The format command stopped accepting a lone disk 
  name argument</font></li>
  <li><font size="4">Fixed: The framebuffer graphic driver was not drawing any 
  part of outlined rectangles if part of the rectangle was off the screen.</font></li>
  <li><font size="4">Fixed: Resizing list components was not resizing the 
  subcomponent list items</font></li>
  <li><font size="4">Fixed: Multiple buttons inside a container component were 
  not picking up window events.</font></li>
  <li><font size="4">Fixed: The arial bold 10 font's equals ('=') sign was a 
  plus ('+')</font></li>
  <li><font size="4">Fixed: Pressing CTRL-ALT-DELETE in graphics mode produced a 
  panic with 'can't yield() in interrupt handler'</font></li>
</ul>
<hr>

<p><font size="4">VERSION 0.4<br>
</font>19/07/2004</p>
<p><font size="4">Overview: This release features a number of graphical 
interface improvements, including several new GUI widgets and &quot;newbie&quot; usability 
tweaks. The 'install' and 'disk manager' programs have been properly 
GUI-enabled, and this release also adds user authentication with MD5 password 
encryption.</font></p>
<ul>
  <li><font size="4">Implemented the following GUI widgets: checkbox, radio 
  button, menu bar (plus menu, and menu item), progress bar, canvas, scroll bar, 
  list (plus list item), and password field</font></li>
  <li><font size="4">Implemented 'container' components which can be nested 
  arbitrarily, and have their layout done individually. Added a top level 
  'container' component to the window structure and removed the simple list of 
  components.</font></li>
  <li><font size="4">When running from a CD-ROM or other read-only filesystem, 
  there is now a general warning that the user can't modify settings or change 
  anything generally.</font></li>
  <li><font size="4">The OS loader now gives the kernel a list of supported 
  graphics resolutions/depths that are supported, and there is user preference 
  for choosing the mode, which the OS loader now reads from a file.</font></li>
  <li><font size="4">Improved the hardware structure in the OS loader so that it 
  makes use of NASM's STRUCT directive</font></li>
  <li><font size="4">Added text-mode password prompting code to the vsh library</font></li>
  <li><font size="4">Exported locking and variable list functionality to user 
  space.</font></li>
  <li><font size="4">The 'configuration reader/writer' code is more 
  sophisticated, so that it preserves comment lines (if replacing an existing 
  config file)</font></li>
  <li><font size="4">Updated the install image generation scripts, and fixed the 
  naming of the generated images</font></li>
  <li><font size="4">Created a new background image that isn't so 'busy'. 
  Removed the old ones.</font></li>
  <li><font size="4">The 'start program' loaded by the kernel is now specified 
  dynamically in a file, and added an 'image boot' program to be loaded first 
  when booting from an ISO or floppy image distribution that will prompt the 
  user whether they want to install, or simply run from that image.</font></li>
  <li><font size="4">In the vsh, you no longer need to put a space between the 
  last command argument and any ampersand</font></li>
  <li><font size="4">Implemented Bresenham's lines and circles algorithms in the 
  framebuffer graphic driver.</font></li>
  <li><font size="4">Both the native installer and the UNIX installation scripts 
  now use file lists and include options to do a 'basic' versus 'full' install.</font></li>
  <li><font size="4">The FAT filesystem driver no longer calculates the 
  filesystem free space asynchronously. Previously, this meant that an 
  application could not know</font></li>
  <li><font size="4">how long to wait before it could begin writing to a 
  freshly-mounted filesystem.</font></li>
  <li><font size="4">Graphicized both the 'install' and 'disk manager' programs</font></li>
  <li><font size="4">After copying a larger disk to a smaller one in the disk 
  manager, we now go through the entries in the partition table and adjust them 
  so that none have illegal values. That means, for example, deleting or 
  truncating partitions that don't fit on the smaller disk.</font></li>
  <li><font size="4">Added a 'cursoring' effect to the text mode disk manager, 
  since it makes the flow better (not required to type partition numbers, etc.), 
  and which means that a partition or empty space is always selected, which fits 
  better with the graphics mode use model.</font></li>
  <li><font size="4">The disk manager program now saves disk-specific backup 
  MBRs in the /system/boot directory</font></li>
  <li><font size="4">The window manager thread now checks that windows' 
  processes are still alive, so that it doesn't require a mouse click to dispose 
  of the window. Also, if the window manager thread dies it is now restarted</font></li>
  <li><font size="4">'Visopsys blue' is now the default foreground color for 
  most GUI components (rather than black).</font></li>
  <li><font size="4">Removed the start window and replaced it with a simple 
  splash image</font></li>
  <li><font size="4">Changed remaining 'csh' scripts to 'sh' and removed the 
  unused stuff from the /utils/src-mgmt directory</font></li>
  <li><font size="4">Rearranges the source code directory structure and build 
  system a little bit, so that there is a top-level 'build' directory which 
  contains all the installable stuff in the correct places. This allowed the 
  installer to be a lot simpler and facilitated the implementation of 
  installation file lists.</font></li>
  <li><font size="4">Implemented a 'getopt' library function and converted the 
  contents of the 'programs' directory to use it.</font></li>
  <li><font size="4">Added a 'window shell' thread which is the new user login 
  process in graphics mode, and which handles events on components in the root 
  window.</font></li>
  <li><font size="4">Added 'delete user' functionality to both the kernelUser 
  code and the 'user manager' program.</font></li>
  <li><font size="4">Added a 'passwd' command that shows as a 'user manager' in 
  the GUI, that can be used to change passwords and create/delete accounts.</font></li>
  <li><font size="4">Separated the source files for the different libraries into 
  subdirectories, and broke out the libvsh and libwindow code into separate 
  source files to reduce executable sizes.</font></li>
  <li><font size="4">Added a 'file selection' dialog box into the window lib.</font></li>
  <li><font size="4">Font printing by default draws the background color under 
  the character.&nbsp; Transparent images are still an option.</font></li>
  <li><font size="4">Added a 'flags' field to the kernelWindow structure, since 
  there were a few booleans and it's a waste of space to make them all ints.</font></li>
  <li><font size="4">Vsh file completion now works like bash when there's only 
  one 'real' item in a directory - complete it with just a [tab]</font></li>
  <li><font size="4">Made it possible to click between multiple text areas in 
  window</font></li>
  <li><font size="4">Added user authentication to the login program</font></li>
  <li><font size="4">Improved handling of width specifiers for 'printf' number 
  parameters.</font></li>
  <li><font size="4">Added an MD5 encryption implementation</font></li>
  <li><font size="4">A commands is no longer added to the vsh history if it's 
  the same as the previous one</font></li>
  <li><font size="4">The keyboard code now reads the lights status at startup so 
  that it doesn't reset them improperly. Also, numlock works.</font></li>
  <li><font size="4">Implemented enable/disable functionality for GUI 
  components.</font></li>
  <li><font size="4">Implemented a 'set visible' function for components</font></li>
  <li><font size="4">Implemented 'set disabled' functionality for window menu 
  items</font></li>
  <li><font size="4">Added 'resizable X' and 'resizable Y' fields in the 
  component parameter structure, and only resize components appropriately</font></li>
  <li><font size="4">Simplified the process of adding components to windows, so 
  that you only have to call the 'new' function, with the component parameters, 
  and it will be added to the window automatically.</font></li>
  <li><font size="4">Removed the 'size' parameters from the 'button' component 
  constructor</font></li>
  <li><font size="4">Implemented the 'get data' and 'set data' methods of text 
  label components, so that the label contents can be dynamic.</font></li>
  <li><font size="4">Added a window component flag that will prevent a [tab] 
  from unfocusing certain components.</font></li>
  <li><font size="4">Removed the coordinate and size parameters from the &quot;new 
  window&quot; function of the window manager. The window size is determined 
  automatically unless the &quot;set size&quot; function is called.</font></li>
  <li><font size="4">Window layout happens automatically. The programmer no 
  longer has to do this explicitly.</font></li>
  <li><font size="4">Added resizing capability to the windows in the window 
  manager.</font></li>
  <li><font size="4">Window buttons are now focusable and can handle various 
  keyboard events</font></li>
  <li><font size="4">Implemented proper 'focussing' of window components</font></li>
  <li><font size="4">Added a function for getting the contents of a text field 
  or text area component in the window manager</font></li>
  <li><font size="4">The window close button no longer uses the little 'X' image 
  file, but rather draws its own 'X' using the new bresenham line drawing 
  abilities.</font></li>
  <li><font size="4">Changed the 'shutdown' program so that in graphics mode it 
  prompts for a reboot or shutdown</font></li>
  <li><font size="4">Added a better 'install' icon.</font></li>
  <li><font size="4">Added a GPL banner to the image boot program</font></li>
  <li><font size="4">Disabled the left-right cursor keys in the vsh, as they 
  tend to make people think they can do line editing (which they can't, yet).</font></li>
  <li><font size="4">Fixed: If the screen dimensions are too small to 
  accommodate a window, it doesn't appear at all.</font></li>
  <li><font size="4">Fixed: Pressing CTRL-ALT-DELETE in graphics mode produces a 
  panic with 'can't yield() in interrupt handler'</font></li>
  <li><font size="4">Fixed: The 'screenshot' program was crashing when 
  attempting to write to read-only filesystems.</font></li>
  <li><font size="4">Fixed: If the floppy was removed while the boot loader was 
  loading the kernel, it was going into long retry loops</font></li>
  <li><font size="4">Fixed: File input streams were horribly broken in the 
  ISO9660 filesystem driver. Before the fix they would only read the first 
  sector.</font></li>
  <li><font size="4">Fixed: argv[0] was not being set by the loader code. It was 
  only being set explicitly by the vsh when programs are executed, which it 
  shouldn't do at all.</font></li>
  <li><font size="4">Fixed: The arrangement of icons in the root window so that 
  they wrap into the next column when they hit the bottom of the screen</font></li>
  <li><font size="4">Fixed: There was trouble (triple-fault) drawing outline 
  (non-filled) rectangles in the framebuffer graphic driver, if they were 
  partially off the edges of the screen</font></li>
  <li><font size="4">Fixed: The ELF loader was not allocting enough memory for 
  the uninitialized data that executables might require.</font></li>
  <li><font size="4">Fixed: The free spaces calculation in the disk manager was 
  incorrect, particularly when there was only one partition that didn't start at 
  zero</font></li>
  <li><font size="4">Fixed: &quot;component cannot focus&quot; error messages when 
  clicking on icon components</font></li>
  <li><font size="4">Fixed: When booting from the hard disk , the opening of the 
  kernel log file often failed with a &quot;not enough space&quot; message.</font></li>
  <li><font size="4">Fixed: In text mode, the login process was not properly 
  setting supervisor privilege for the 'admin' user</font></li>
  <li><font size="4">Fixed: When windows were dragged, the focus was lost from 
  the focused component.</font></li>
  <li><font size="4">Fixed: Text fields were coming up with their cursors on by 
  default.</font></li>
  <li><font size="4">Fixed: The kernel.log file was not being updated/written 
  correctly.</font></li>
  <li><font size="4">Fixed: The fileWrite routine was not behaving as expected 
  when writing a single-block file. The file size was zero, even though the file 
  was written and closed properly</font></li>
  <li><font size="4">Fixed: When writing a file using the file stream functions, 
  there was a newline inserted at the beginning of a file.</font></li>
</ul>
<hr>

<p><font size="4">VERSION 0.33<br>
</font>11/01/2004</p>
<p><font size="4">Overview: This is primarily a bugfix release, with bootable 
CD-ROM support added as a new feature.</font></p>
<ul>
  <li><font size="4">Added bootable ISO9660 (el-torito) CD-ROM support.</font></li>
  <li><font size="4">The 'no boot' boot sector code no longer reboots the 
  system, but instead properly calls the next boot option</font></li>
  <li><font size="4">Fixed: Spurious error messages when booting from a 
  read-only file system.</font></li>
  <li><font size="4">Fixed the kernel heap allocation code, which was losing and 
  corrupting blocks of memory, and leaving small, odd-sized gaps of unused 
  memory.</font></li>
  <li><font size="4">Polished up the scripts for creating floppy &amp; CD-ROM images</font></li>
  <li><font size="4">Fixed: No longer attempt to recalibrate ATAPI disks.</font></li>
  <li><font size="4">If a CD-ROM read fails because there is no disk, the driver 
  no longer leaves the number of sectors at zero, since that will stop all 
  subsequent read attempts</font></li>
  <li><font size="4">The CD-ROM driver code can determine more elegantly whether 
  there is a data CD in the drive and if not, print a friendly error message.</font></li>
</ul>
<hr>
<p><font size="4">VERSION 0.32<br>
</font>04/01/2004</p>
<p><font size="4">Overview: This is primarily a bugfix release, with CD-ROM and 
ISO9660 filesystem support added as new (alpha) features.</font></p>
<ul>
  <li><font size="4">Added (multi-session capable) CD-ROM driver code</font></li>
  <li><font size="4">Fixed: The 'date' command day of the week was wrong.</font></li>
  <li><font size="4">Created a set of help text files for all of the commands, in 
a /programs/helpfiles subdirectory. The 'help' command is now an 
executable which can provide command-specific help.</font></li>
  <li><font size="4">The 'vsh' shell now has a '-c' option so that it can be used 
to execute commands, non-interactively.</font></li>
  <li><font size="4">Added a 'system' Visopsys C library function</font></li>
  <li><font size="4">Added a 'driver data' field in the physical disk object, so 
that the different drivers can store device-specific data there. 
Implemented the floppy driver's 'detect' and 'register device' routines to 
remove some of the floppy-specific stuff from the hardware detection code.</font></li>
  <li><font size="4">The 'mount' and 'umount' commands will now accept relative 
pathnames</font></li>
  <li><font size="4">Added an ISO9660 filesystem driver</font></li>
  <li><font size="4">Eliminated spurious floppy timeout error messages when 
booting from hard disks.</font></li>
  <li><font size="4">Fixed: Unknown floppy drive types were causing hardware 
  detection (and therefore the whole startup) to fail.</font></li>
</ul>
<hr>
<p><font size="4">VERSION 0.31<br>
</font>12/12/2003</p>
<p><font size="4">Overview: This is primarily a bugfix release, with EXT2 
filesystem support added as a new (alpha) feature.</font></p>
<ul>
  <li><font size="4">Implemented a preliminary, alpha, read-only EXT2 filesystem 
  driver</font></li>
  <li><font size="4">The libraries and (non-kernel) include files have been relicensed under the GNU LGPL to permit use by proprietary programs</font></li>
  <li><font size="4">The IDE/ATA/ATAPI driver was not responding to disks on the 
  secondary controller.</font></li>
  <li><font size="4">Fixed: The 'cat' program wasn't printing tabs properly the 
  way the 'more' program does.</font></li>
  <li><font size="4">Fixed: kernelMalloc allocations were not necessarily being 
done on any boundaries. It is now done on sizeof(unsigned) (dword) 
boundaries.</font></li>
  <li><font size="4">Added a *very* basic 'find' program which only traverses 
  whole directory trees. Initially to aid in development of new filesystems</font></li>
</ul>
<hr>
<p><font size="4">VERSION 0.3<br>
</font>24/11/2003</p>
<p><font size="4">Overview: This release is very much an &quot;under the hood&quot; 
release. The user interaction is similar to that of 0.2, but a great deal 
of work has gone into improving the structure, performance, and 
stability of the underlying code -- particularly the disk subsystem. However, 
some eye candy has been added, and the GUI is more functional and 
consistent.</font></p>
<ul>
  <li><font size="4">A thread of a process can now kill the parent process.</font></li>
  <li><font size="4">Created a multitasker 'detach' function for daemons or 
  other programs to use to detach themselves from any programs that might be 
blocking on them.</font></li>
  <li><font size="4">Fixed: Windows wasn't entirely happy with our FAT short 
  filename aliases.&nbsp; Complained about the format of the short name of &quot;/system/boot/bootsect.fatnoboot&quot;</font></li>
  <li><font size="4">Changed the naming of the kernel window components (removed the'component' bit from the names)</font></li>
  <li><font size="4">Fixed: File completions were completing things they 
  shouldn't; i.e. when you &quot;cd system; ls b[tab]&quot; it completed &quot;background&quot; but 
there's a &quot;boot&quot; directory as well.</font></li>
  <li><font size="4">The window manager thread is now the login process for a 
  user when in graphics mode, rather than a text shell running in a console 
window.</font></li>
  <li><font size="4">Reduced the stack sizes of processes. They shouldn't need 
  nearly as much (260K) as they were being given.</font></li>
  <li><font size="4">Removed all the 'binary distribution' stuff (the Java 
  installer, shell scripts, readmes, etc). We will only do binary 
distributions as floppy or ISO images from now on.</font></li>
  <li><font size="4">The console window is no longer shown by default. Added a 
  program and icon ('console') to display it and handle the window events, 
etc. Added external API functions to put a console widget into a user 
program.</font></li>
  <li><font size="4">Changed the error reporting interface for the disk drivers. 
  Removed the 'last error message' and 'last error code' functions -- 
these were leftovers from the days of ASM drivers that couldn't use the 
normal error reporting mechanisms.</font></li>
  <li><font size="4">Fixed: The mouse was not being redrawn when windows close 
  themselves.</font></li>
  <li><font size="4">Implemented 'levels' for GUI components within a window, in 
  the same manner as windows have levels. This way if components overlap, 
we can only send windowEvents to the uppermost one.</font></li>
  <li><font size="4">Sped up the scrolling of graphics text areas. Now only 
  scroll as much of the width of the area as the longest line of contents.</font></li>
  <li><font size="4">Fixed up the framebuffer graphic driver a little bit more so 
that it draws most efficiently for the bit depth it's using.</font></li>
  <li><font size="4">Implemented kernel versions of malloc() and free() so that 
we're not always wasting whole pages of memory for small things.</font></li>
  <li><font size="4">Added shutdown and reboot buttons to the login screen in 
  graphics mode.</font></li>
  <li><font size="4">Implemented text labels on kernelWindowButton components, 
with selectable font.</font></li>
  <li><font size="4">Fixed: Window layout problems. Attempting to add reboot and 
  shutdown buttons to the login screen, I discovered that setting the 
component's gridWidth parameters to 2 causes a crash. In addition, when I 
incorrectly left the gridWidth at 1 and attempted to add the 2 buttons 
below (using 2 grid places) they were erroneously placed on the line above, 
and the other widgets got squashed together.</font></li>
  <li><font size="4">Added an event notification callback mechanism for user 
programs that use the GUI. When a user performs a GUI action, such as 
clicking a button, the user application can now read that event from the 
component.</font></li>
  <li><font size="4">As a supplement to this, implmented user-mode library code 
for monitoring window component event queues. It includes a &quot;GUI run&quot; 
function that signals the application is ready to begin monitoring its 
widgets for events, after all its setup is done. The rest of the flow can 
be driven by callbacks from events. All of the included programs have 
been converted to use these features.</font></li>
  <li><font size="4">Added a logout procedure for the window manager (rather 
  than having to log out by hand from the console window)</font></li>
  <li><font size="4">Implemented a better &quot;kernel panic&quot; routine that displays 
  something useful in either text or graphics mode and shuts things down 
quickly.</font></li>
  <li><font size="4">Interrupt handlers and their actions are no longer allowed 
  to yield(), wait(), block(), etc.</font></li>
  <li><font size="4">Fixed: Moving the mouse in text mode is disrupting keyboard 
  input</font></li>
  <li><font size="4">The fdisk program will save a backup copy of the MBR before 
writing changes, and provides an option to restore it.</font></li>
  <li><font size="4">The graphic/text console drivers, as well as the FAT 
  filesystem driver, have abstracted driver registration procedures like the 
hardware drivers do.</font></li>
  <li><font size="4">The API calls in kernelApi.c are now 'hashed' according to 
their function number, for faster API throughput.</font></li>
  <li><font size="4">Added a routine to the generic disk code for reading the 
  disks' partition tables (instead of in the hardware enumeration 
code). It is be re-callable anytime so that programs like fdisk can 
create/delete partitions and have the change be reflected immediately in the 
list of logical disks.</font></li>
  <li><font size="4">Cleaned up the management of the kernel's built-in drivers. 
  The drivers now have an 'init' that registers the driver structure with 
the kernel, so that the kernelDriverManagement code doesn't have to have all 
the functions hard-coded in there.</font></li>
  <li><font size="4">Disk caches are invalidated when removable media is 
  unmounted.</font></li>
  <li><font size="4">The boot sector and the OS loader can now boot from a 
  cylinder &gt; 1024.</font></li>
  <li><font size="4">Large disk geometries are now correctly evaluated by the 
  hardware detection code and by the fdisk program.</font></li>
  <li><font size="4">Created a 'non-bootable' FAT boot sector, that the 
  formatting code uses to make non-system FAT volumes</font></li>
  <li><font size="4">When files are copied, the sizes are now being set 
  correctly.</font></li>
  <li><font size="4">The new floppy driver C code no longer freezes up the 
  computer if you remove the media unexpectedly.</font></li>
  <li><font size="4">Hardware enumeration and fdisk no longer fail when there is 
no partition table on the hard disk</font></li>
  <li><font size="4">FAT filesystem root directories now have '.' entries (and 
  '..' entries when they're not '/')</font></li>
  <li><font size="4">Removing the last file in a directory (for example, in the 
  root of a filesystem) no longer produces an error message.</font></li>
  <li><font size="4">Fixed up the filesystem driver stuff, so that there is only 
  one instance of each driver of each known type </font></li>
  <li><font size="4">In the FAT filesystem driver, file names that start with 
  '.' were listed, but could not be created or accessed. This is fixed.</font></li>
  <li><font size="4">Implmented FAT filesystem driver formatting functionality</font></li>
  <li><font size="4">Improved the fdisk program so that it can do most common 
operations</font></li>
  <li><font size="4">When there are no files in a directory, 'ls' no longer 
  prints an error message.</font></li>
  <li><font size="4">When doing disk reads, we now do read-ahead caching</font></li>
  <li><font size="4">The kernel is now able to handle operation from a read-only 
or write-protected media without spewing errors and getting panicky.</font></li>
  <li><font size="4">kernelLocks are now exclusive even to the same process. i.e. 
If a process owns a lock, calling kernelLockGet() a second time 
fails.</font></li>
  <li><font size="4">Added a UK English keyboard mapping</font></li>
  <li><font size="4">The disk code should launches a new 'synchronizer' thread 
  if the existing one dies.</font></li>
  <li><font size="4">The exception handler tries to do a stack dump when an 
  exception occurs.</font></li>
  <li><font size="4">The filesystem code is now correctly updating FAT short 
  filename aliases when files are moved.</font></li>
  <li><font size="4">Updated the loader code that searches for a valid video 
  mode. It now searches for *any* LFB video mode first, and reports an error 
to that effect if it finds none. That is a different scenario than not 
finding a 'desired' video mode.</font></li>
  <li><font size="4">Added LFB graphic driver support for bit depths of 32, 16, 
and 15 BPP.</font></li>
  <li><font size="4">Remove the FAT sector caching from the FAT filesystem 
  driver.</font></li>
  <li><font size="4">Changed the filesystem synchronizer so that it is now a 
  *disk* daemon that simply turns removable drives' motors off.</font></li>
  <li><font size="4">Implemented proper asynchronous disk caching.</font></li>
  <li><font size="4">Kernel symbols to aid debugging, in the /system/kernelSymbols.txt 
file, which is read at startup and used for stack traces and 
whatnot.</font></li>
  <li><font size="4">Converted all built-in drivers from ASM to C, with inline 
ASM in a processor-specific header file. This makes it easier for them 
to use the C data structures, etc., for better integration with the rest of 
the kernel.</font></li>
  <li><font size="4">THERE IS NO LONGER ANY NASM ASSEMBLY CODE IN THE KERNEL. Woo!</font></li>
  <li><font size="4">Changed 'root' user to 'admin' user -- something less geeky/UNIXy.</font></li>
  <li><font size="4">The kernelDisk structure is broken up into physical objects 
and logical disks (volumes, i.e. hard disk partitions, but every physical 
disk has at least one logical disk). The disk cache, 'idle since' value, 
physical characteristics, etc., are in the physical disk. Things like 
starting sector, number of sectors, etc., are in the logical disk 
structure. The physical disk structure contains the logical ones.</font></li>
  <li><font size="4">Added some memory manager macros so that each memory block 
  request doesn't require an alignment specification (only where 
desired)</font></li>
  <li><font size="4">Fixed: rm system/windowmanager.conf ; sync ...Errors in the 
filesystem.</font></li>
  <li><font size="4">The window icon code is better able to deal with long icon 
  names. Previously it printed the whole name on one long line.</font></li>
  <li><font size="4">When a user logs out of the window manager, all windows 
  belonging to that user are destroyed</font></li>
  <li><font size="4">Fixed: Mouse driver initialization was sometimes causing 
  the boot sequence to 'hang' a little bit -- wiggling the mouse or pressing keys 
was required to continue</font></li>
  <li><font size="4">The kernel log utility was losing some log messages that 
  come early in the boot process, before the root filesystem is mounted.</font></li>
  <li><font size="4">Change start.o (.c) to crt0.o for more UNIX C compatibility.</font></li>
  <li><font size="4">Fixed: When running a command window, all the shell 
  processes suddenly start hogging CPU. Was a case of 2 'ready' processes 
constantly yield()ing to one another. Changed the scheduler so that a process will 
get a low weight if it has yielded that timeslice before (a little 
different from the previous algorithm)</font></li>
</ul>
<hr>
<p><font size="4">VERSION 0.2<br>
</font>03/06/2003</p>
<p><font size="4">Overview: This release was a huge leap ahead from version 0.1 
(and it took a long time, too). This release added a basic GUI, 
whereas version 0.1 was text-mode only. Really, the list of changes 
below is very incomplete -- Especially in listing new features.</font></p>
<ul>
  <li><font size="4">Fixed: When rebooting from other operating systems such as 
  Windows or Linux, Visopsys would triple-fault. Clearing the page cache 
seems to do the trick. Also changed the way page caching is done. Turned 
off write-through which improved the performance of the graphics as 
well.</font></li>
  <li><font size="4">Updated the shell 'help' text.</font></li>
  <li><font size="4">Fixed: Can't move/copy a file over top of another by the 
  same name in a different location unless you specify the destination filename 
explicitly (i.e. if you just specify the directory, it fails)</font></li>
  <li><font size="4">When using the 'more' program, pressing [enter] to list a 
  new line no longer leaves the &quot;--More--(xx%)--&quot; message on the screen</font></li>
  <li><font size="4">When a process has finished but is waiting for its child 
  threads to terminate (i.e. mount), any process that is blocking on that 
process now stops waiting.</font></li>
  <li><font size="4">Fixed: Crashes when running the 'install' program, and 
  other types of long disk writes. When this happened under the old exception 
handler, the handler used to go into an endless loop complaining about an 
exception in the idle process. This was the fault of the 'timed event 
scheduler'.&nbsp; Got rid of that.</font></li>
  <li><font size="4">Fixed: The floppy motor was staying on all the time on many 
  machines</font></li>
  <li><font size="4">Fixed: The FAT filesystem code was not properly filling all 
  long filenames. They were cut off after some number of characters.</font></li>
  <li><font size="4">Fixed: When in the multitasker the killing of a process is 
  delayed because of child threads, the process never seems to be killed when 
the children have all terminated. For example, when you mount a large FAT 
filesystem (C:), the thread that reads the FAT keeps the &quot;mount&quot; process 
alive, waiting, forever.</font></li>
  <li><font size="4">Fixed: When pushing some of the &quot;non-printable&quot; keys such 
  as 'num lock' and then doing command history, the shell was backing up by 
one character before completing the filename.</font></li>
  <li><font size="4">Added support for non-fixed-width fonts in the kernelFont 
functions.</font></li>
  <li><font size="4">Added support for loading fonts. The system font looks lame 
  on titles and whatnot, particularly on the login screen.</font></li>
  <li><font size="4">The login is now a little more meaningful in graphics mode. 
  Previously, a console window would open with a login: prompt, but the user 
could happily start opening other command windows and such, and 
ignore the login (unless they wanted root permissions).</font></li>
  <li><font size="4">Added loading support for 24-bit bitmaps. We already saved 
  in that format.</font></li>
  <li><font size="4">Fixed: Umounting a filesystem was not properly dereferencing 
either the filesystem or the disk. Couldn't mount-&gt;unmount-&gt;mount the 
same disk.</font></li>
  <li><font size="4">Changed the shell to do filename completions on the same 
  line as the current line, rather than starting on the next line.</font></li>
  <li><font size="4">Implemented multiple text output streams, with the text 
  input stream changing to the active window, so that we can have multiple 
text windows open at the same time</font></li>
  <li><font size="4">Implmented the FAT filesystem driver checking functionality 
[It's very primitive, but it does detect and fix some errors]</font></li>
  <li><font size="4">Moved the exception handler code into the multitasker. It 
  really needs to interact with the multitasker quite a bit.</font></li>
  <li><font size="4">The new exception handler thread was hanging the terminal 
  (breakable with CTRL-C) when the exception message happened at the bottom of 
the text area and caused the screen to scroll</font></li>
  <li><font size="4">The kernel's exception handler is now a spawned thread with 
  its own stack, etc., so that it doesn't run as part of whatever process 
caused the exception in the first place. This helps to prevent the 
exception handler itself from crashing if things have gone seriously wrong with 
a process.</font></li>
  <li><font size="4">Adding permission checking to the kernel functions that are 
  be exported to the rest of the world.</font></li>
  <li><font size="4">Fixed: The boot progress indicator was progressing beyond 
  the end of the indicator</font></li>
  <li><font size="4">The 'getchar' routine now does the work of polling/yielding, 
rather than the programs that call it.</font></li>
  <li><font size="4">Added a basic 'fdisk' program that can do things like swap 
the active partition on hard disks</font></li>
  <li><font size="4">Fixed: The hard disk enumeration routine was crashing when 
  there was more than one physical disk</font></li>
  <li><font size="4">Added the ability to copy directory trees in the filesystem 
  functions, one level up from the filesystem driver. Could be a library 
routine instead someday.</font></li>
  <li><font size="4">Fixed: The 'cp' command was crashing when copying files 
  involving the hard disk</font></li>
  <li><font size="4">Implmented the 'write' function in the IDE disk driver. 
Previously it was left out since the filesystem driver is still imperfect.</font></li>
  <li><font size="4">Fixed: Mounting hard disk partitions on my 30GB hard disk 
  was not working.&nbsp; LBA versus CHS issue</font></li>
  <li><font size="4">Fixed: The mouse driver initialization sometimes hung, 
  waiting for a response from the mouse to a command</font></li>
  <li><font size="4">Added ELF executable capability and moved the programs to 
  ELF format</font></li>
  <li><font size="4">Fixed: Incomplete filenames were still having an / appended 
  to them by the shell.</font></li>
  <li><font size="4">The PS2 mouse driver and the keyboard driver now share a 
  lock on the device, since they both deal with the same registers, etc.</font></li>
  <li><font size="4">Fixed: Sometimes an error in another program could cause a 
  fault in the idle process (?!?), then the exception handler routines would 
get into an endless loop </font></li>
  <li><font size="4">Fixed: When a process created a new process, the unmapping 
of the new process' memory from the parent process space would sometimes 
cause a page fault.</font></li>
  <li><font size="4">Fixed: The 'log file updater' thread was been crashing 
frequently, most often when another process crashed</font></li>
  <li><font size="4">The scheduler no longer spawns a new idle thread while the 
  multitasker is in the process of shutting down.</font></li>
  <li><font size="4">Fixed: The 'date' command was producing wrong results. The 
year, dotm, hour, minute, etc., were correct, but the month and dotw were 
wrong. </font></li>
  <li><font size="4">Fixed: When shortening a filename, one extra character from 
  the old filename got left on the end of the new name. This was because 
of strncpy changes.</font></li>
  <li><font size="4">Fixed: There was a little sequencing error in the kernelMemoryManager's share memory routine -- it was deallocating the memory from 
the sharer process before allocating it to the sharee.</font></li>
  <li><font size="4">Simplified the default driver management. It was 
  ridiculously overcomplicated.</font></li>
  <li><font size="4">Fixed: The FAT code that lowercases short filenames wasn't 
  lowercasing the file extensions</font></li>
  <li><font size="4">Fixed: Most of the device driver initialization routines 
  were being called twice; once in kernelDriverManagement.c and once in the 
abstraction layer initialization</font></li>
</ul>
<hr>
<p><font size="4">VERSION 0.1<br>
</font>02/08/2001</p>
<p><font size="4">Initial public release.</font></p>

<p align="left">&nbsp;</p>

<p align="left"></p>

<!--msnavigation--></td></tr><!--msnavigation--></table><!--msnavigation--><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td>

<blockquote>
  <blockquote>
    <p align="right"><font color="#FFFFFF"><a href="../index.html">
    <img
    src="../img/nav_buttons/home.gif" alt="Go back to the Visopsys Home Page." border="0"
    align="middle" width="53" height="25"></a>&nbsp;&nbsp; <a href="../about/index.html">
    <img src="../img/nav_buttons/about.gif"
    alt="What is Visopsys?" border="0" align="middle" width="60" height="25"></a>&nbsp;&nbsp; </font>
    <a href="../about/screenshots.html">
    <img border="0" src="../img/nav_buttons/screenshots.gif" align="middle" width="105" height="22"></a>&nbsp;&nbsp; <font color="#FFFFFF"> <a href="index.html">
    <img
    src="../img/nav_buttons/download.gif" alt="Download Visopsys and associated files."
    border="0" align="middle" width="95" height="25"></a>&nbsp; </font>&nbsp;<a href="../developers/index.html"><img
    src="../img/nav_buttons/developers.gif" alt="Resources for Visopsys development"
    border="0" align="middle" width="97" height="29"></a>&nbsp;&nbsp; <a href="../osdev/index.html">
    <img
    src="../img/nav_buttons/osdev.gif" border="0" align="middle" width="64" height="25"></a>&nbsp;&nbsp; <a href="../search.html">
    <img
    src="../img/nav_buttons/search.gif" alt="Search the Visopsys Site" align="middle"
    border="0" width="63" height="24"></a><font face="Times New Roman" color="#FFFFFF"><br>
    This site is copyright  1999-2005, J.
    Andrew McLaughlin<br>
    Visopsys and Visopsys.org are trademarks of J. Andrew McLaughlin<br>
    Last updated on
    March 22, 2005</font></p>
  </blockquote>
</blockquote>

<p>&nbsp;</p>

</td></tr><!--msnavigation--></table></body>
</html>